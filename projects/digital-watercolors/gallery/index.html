<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gallery — Digital Watercolors</title>
  <meta name="description" content="Watercolor paintings with pixel comparison slider. Drag to reveal the transformation.">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=DM+Sans:wght@400;500&family=Press+Start+2P&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --bg-dark: #101112;
      --bg-card: #1a1a1c;
      --text-primary: #f5f5f5;
      --text-muted: #8a8a8a;
      --accent: #c9a86c;
      --accent-light: #e8dcc8;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      font-size: 16px;
    }

    body {
      background: var(--bg-dark);
      color: var(--text-primary);
      font-family: 'DM Sans', sans-serif;
      min-height: 100vh;
      line-height: 1.5;
    }

    /* ========================================
       PIXEL MODE (Option B)
       ======================================== */
    body.pixel-mode {
      font-family: 'Press Start 2P', monospace;
      font-size: 10px;
      line-height: 1.8;
    }

    body.pixel-mode .pixel-viewport {
      /* Render at smaller size, scale up */
      transform: scale(1);
      transform-origin: top center;
      image-rendering: pixelated;
    }

    body.pixel-mode h1,
    body.pixel-mode h2,
    body.pixel-mode h3 {
      font-family: 'Press Start 2P', monospace;
      letter-spacing: 0;
    }

    body.pixel-mode .painting-title {
      font-size: 12px;
    }

    body.pixel-mode .painting-subtitle {
      font-size: 8px;
    }

    /* ========================================
       HEADER
       ======================================== */
    .header {
      padding: 1.5rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid #2a2a2c;
    }

    .header-brand {
      display: flex;
      align-items: baseline;
      gap: 0.75rem;
    }

    .header-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--accent-light);
    }

    .header-back {
      font-size: 0.75rem;
      color: var(--text-muted);
      text-decoration: none;
    }

    .header-back:hover {
      color: var(--accent);
    }

    /* Pixel mode toggle */
    .pixel-toggle {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.7rem;
      color: var(--text-muted);
      cursor: pointer;
      padding: 0.4rem 0.6rem;
      border: 2px solid #3a3a3c;
      background: transparent;
      transition: all 0.1s;
    }

    .pixel-toggle:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    .pixel-toggle.active {
      background: var(--accent);
      color: var(--bg-dark);
      border-color: var(--accent);
    }

    body.pixel-mode .pixel-toggle {
      font-family: 'Press Start 2P', monospace;
      font-size: 8px;
    }

    /* ========================================
       GALLERY GRID
       ======================================== */
    .gallery {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }

    .gallery-intro {
      text-align: center;
      margin-bottom: 3rem;
    }

    .gallery-intro h1 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .gallery-intro p {
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    .paintings {
      display: flex;
      flex-direction: column;
      gap: 4rem;
    }

    /* ========================================
       PAINTING CARD WITH COMPARISON SLIDER
       ======================================== */
    .painting-card {
      background: var(--bg-card);
      border: 2px solid #2a2a2c;
      padding: 1.5rem;
    }

    body.pixel-mode .painting-card {
      box-shadow:
        0 0 0 2px #0a0604,
        0 0 0 4px #3a3a3c,
        6px 6px 0 0 rgba(0,0,0,0.4);
    }

    .painting-header {
      margin-bottom: 1rem;
    }

    .painting-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.4rem;
      font-weight: 600;
      color: var(--accent-light);
      margin-bottom: 0.25rem;
    }

    .painting-subtitle {
      font-size: 0.8rem;
      color: var(--text-muted);
      font-style: italic;
    }

    /* ========================================
       COMPARISON SLIDER
       ======================================== */
    .comparison-slider {
      position: relative;
      width: 100%;
      aspect-ratio: 4/3;
      overflow: hidden;
      cursor: ew-resize;
      user-select: none;
      -webkit-user-select: none;
      touch-action: pan-y pinch-zoom;
    }

    .comparison-slider img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      background: #0a0a0a;
      pointer-events: none;
    }

    .comparison-slider .img-hd {
      z-index: 1;
    }

    .comparison-slider .img-pixel {
      z-index: 2;
      clip-path: inset(0 0 0 0);
      image-rendering: pixelated;
      image-rendering: crisp-edges;
    }

    /* Slider handle */
    .slider-handle {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 4px;
      background: var(--accent);
      z-index: 10;
      cursor: ew-resize;
      box-shadow: 0 0 8px rgba(0,0,0,0.5);
    }

    .slider-handle::before,
    .slider-handle::after {
      content: '';
      position: absolute;
      top: 50%;
      width: 0;
      height: 0;
      border: 8px solid transparent;
    }

    .slider-handle::before {
      right: 100%;
      margin-right: 4px;
      border-right-color: var(--accent);
      transform: translateY(-50%);
    }

    .slider-handle::after {
      left: 100%;
      margin-left: 4px;
      border-left-color: var(--accent);
      transform: translateY(-50%);
    }

    /* Labels */
    .comparison-labels {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      display: flex;
      justify-content: space-between;
      padding: 0.75rem 1rem;
      background: linear-gradient(transparent, rgba(0,0,0,0.7));
      z-index: 5;
      pointer-events: none;
    }

    .comparison-label {
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: rgba(255,255,255,0.8);
      text-shadow: 0 1px 3px rgba(0,0,0,0.8);
    }

    body.pixel-mode .comparison-label {
      font-size: 8px;
    }

    /* ========================================
       PAINTING INFO
       ======================================== */
    .painting-info {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px dashed #3a3a3c;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .painting-meta {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .painting-actions {
      display: flex;
      gap: 0.5rem;
    }

    .btn-small {
      font-size: 0.7rem;
      padding: 0.4rem 0.8rem;
      border: 2px solid #3a3a3c;
      background: transparent;
      color: var(--text-muted);
      text-decoration: none;
      cursor: pointer;
      transition: all 0.1s;
    }

    .btn-small:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    body.pixel-mode .btn-small {
      font-family: 'Press Start 2P', monospace;
      font-size: 8px;
    }

    /* ========================================
       FOOTER
       ======================================== */
    .footer {
      text-align: center;
      padding: 2rem;
      border-top: 2px solid #2a2a2c;
      margin-top: 3rem;
    }

    .footer p {
      font-family: 'Cormorant Garamond', serif;
      font-style: italic;
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    .footer a {
      color: var(--accent);
      text-decoration: none;
    }

    /* ========================================
       RESPONSIVE
       ======================================== */
    @media (max-width: 600px) {
      .header {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
      }

      .gallery {
        padding: 1rem;
      }

      .painting-card {
        padding: 1rem;
      }

      .comparison-slider {
        aspect-ratio: 1/1;
      }
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {
      .slider-handle {
        transition: none;
      }
    }
  </style>
</head>
<body>

  <header class="header">
    <div class="header-brand">
      <span class="header-title">Digital Watercolors</span>
      <a href="../" class="header-back">← back to hub</a>
    </div>
    <button class="pixel-toggle" id="pixel-toggle" aria-label="Toggle pixel mode">
      <span class="toggle-label">PIXEL MODE</span>
    </button>
  </header>

  <main class="gallery pixel-viewport">
    <div class="gallery-intro">
      <h1>The Gallery</h1>
      <p>Drag the slider to reveal each painting's pixel transformation</p>
    </div>

    <div class="paintings">
      
      <!-- Mister Softee -->
      <article class="painting-card">
        <div class="painting-header">
          <h2 class="painting-title">Mister Softee</h2>
          <p class="painting-subtitle">Central Park, Summer</p>
        </div>
        <div class="comparison-slider" data-hd="mister-softee-hd.webp" data-pixel="Mister-Softee_400px_.png">
          <img class="img-hd" src="mister-softee-hd.webp" alt="Mister Softee - Original watercolor">
          <img class="img-pixel" src="Mister-Softee_400px_.png" alt="Mister Softee - Pixelated">
          <div class="slider-handle" style="left: 50%;"></div>
          <div class="comparison-labels">
            <span class="comparison-label">Original</span>
            <span class="comparison-label">Pixel</span>
          </div>
        </div>
        <div class="painting-info">
          <span class="painting-meta">Watercolor on paper, 9×12"</span>
          <div class="painting-actions">
            <a href="https://haslun.studio/#prints" class="btn-small" target="_blank">Shop Print</a>
          </div>
        </div>
      </article>

      <!-- Natural History Museum -->
      <article class="painting-card">
        <div class="painting-header">
          <h2 class="painting-title">Natural History Museum</h2>
          <p class="painting-subtitle">Upper West Side, Autumn</p>
        </div>
        <div class="comparison-slider" data-hd="natural-history-museum-entrance-hd.webp" data-pixel="Natural-History-Museum-Entrance__400px_.png">
          <img class="img-hd" src="natural-history-museum-entrance-hd.webp" alt="Natural History Museum - Original watercolor">
          <img class="img-pixel" src="Natural-History-Museum-Entrance__400px_.png" alt="Natural History Museum - Pixelated">
          <div class="slider-handle" style="left: 50%;"></div>
          <div class="comparison-labels">
            <span class="comparison-label">Original</span>
            <span class="comparison-label">Pixel</span>
          </div>
        </div>
        <div class="painting-info">
          <span class="painting-meta">Watercolor on paper, 11×14"</span>
          <div class="painting-actions">
            <a href="https://haslun.studio/#prints" class="btn-small" target="_blank">Shop Print</a>
          </div>
        </div>
      </article>

      <!-- Grand Central Terminal -->
      <article class="painting-card">
        <div class="painting-header">
          <h2 class="painting-title">Grand Central Terminal</h2>
          <p class="painting-subtitle">Midtown, Any Season</p>
        </div>
        <div class="comparison-slider" data-hd="grand-central-terminal-with-flag-hd.webp" data-pixel="Grand-Central-Terminal-with-Flag.png">
          <img class="img-hd" src="grand-central-terminal-with-flag-hd.webp" alt="Grand Central Terminal - Original watercolor">
          <img class="img-pixel" src="Grand-Central-Terminal-with-Flag.png" alt="Grand Central Terminal - Pixelated">
          <div class="slider-handle" style="left: 50%;"></div>
          <div class="comparison-labels">
            <span class="comparison-label">Original</span>
            <span class="comparison-label">Pixel</span>
          </div>
        </div>
        <div class="painting-info">
          <span class="painting-meta">Watercolor on paper, 10×10"</span>
          <div class="painting-actions">
            <a href="https://haslun.studio/#prints" class="btn-small" target="_blank">Shop Print</a>
          </div>
        </div>
      </article>

      <!-- Central Park Mall in Autumn -->
      <article class="painting-card">
        <div class="painting-header">
          <h2 class="painting-title">Autumn Stroll</h2>
          <p class="painting-subtitle">The Mall, Central Park</p>
        </div>
        <div class="comparison-slider" data-hd="autumn-stroll-through-central-park-hd.webp" data-pixel="Central-Park-Mall-in-Autumn.png">
          <img class="img-hd" src="autumn-stroll-through-central-park-hd.webp" alt="Autumn Stroll - Original watercolor">
          <img class="img-pixel" src="Central-Park-Mall-in-Autumn.png" alt="Autumn Stroll - Pixelated">
          <div class="slider-handle" style="left: 50%;"></div>
          <div class="comparison-labels">
            <span class="comparison-label">Original</span>
            <span class="comparison-label">Pixel</span>
          </div>
        </div>
        <div class="painting-info">
          <span class="painting-meta">Watercolor on paper, 10×10"</span>
          <div class="painting-actions">
            <a href="https://haslun.studio/#prints" class="btn-small" target="_blank">Shop Print</a>
          </div>
        </div>
      </article>

    </div>
  </main>

  <footer class="footer">
    <p>Watercolors by <a href="https://haslun.studio" target="_blank">Haslun Studio</a></p>
  </footer>

  <script>
    // ========================================
    // COMPARISON SLIDER
    // GPU-accelerated via clip-path
    // ========================================
    class ComparisonSlider {
      constructor(container) {
        this.container = container;
        this.handle = container.querySelector('.slider-handle');
        this.pixelImg = container.querySelector('.img-pixel');
        this.isDragging = false;
        this.position = 0.5; // 0-1
        
        this.init();
      }
      
      init() {
        // Set initial position
        this.setPosition(0.5);
        
        // Mouse events
        this.container.addEventListener('mousedown', (e) => this.startDrag(e));
        document.addEventListener('mousemove', (e) => this.drag(e));
        document.addEventListener('mouseup', () => this.endDrag());
        
        // Touch events
        this.container.addEventListener('touchstart', (e) => this.startDrag(e), { passive: true });
        document.addEventListener('touchmove', (e) => this.drag(e), { passive: true });
        document.addEventListener('touchend', () => this.endDrag());
        
        // Click to jump
        this.container.addEventListener('click', (e) => {
          if (!this.wasDragging) {
            this.jumpTo(e);
          }
          this.wasDragging = false;
        });
      }
      
      startDrag(e) {
        this.isDragging = true;
        this.wasDragging = false;
        this.container.style.cursor = 'grabbing';
      }
      
      drag(e) {
        if (!this.isDragging) return;
        this.wasDragging = true;
        
        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const rect = this.container.getBoundingClientRect();
        const x = clientX - rect.left;
        const position = Math.max(0, Math.min(1, x / rect.width));
        
        this.setPosition(position);
      }
      
      endDrag() {
        this.isDragging = false;
        this.container.style.cursor = 'ew-resize';
      }
      
      jumpTo(e) {
        const rect = this.container.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const position = Math.max(0, Math.min(1, x / rect.width));
        this.setPosition(position);
      }
      
      setPosition(position) {
        this.position = position;
        
        // Move handle
        this.handle.style.left = `${position * 100}%`;
        
        // Clip pixel image (show left side = pixel, right side = HD)
        // clip-path: inset(top right bottom left)
        const clipRight = (1 - position) * 100;
        this.pixelImg.style.clipPath = `inset(0 ${clipRight}% 0 0)`;
      }
    }

    // Initialize all sliders
    document.querySelectorAll('.comparison-slider').forEach(slider => {
      new ComparisonSlider(slider);
    });

    // ========================================
    // PIXEL MODE TOGGLE
    // ========================================
    const pixelToggle = document.getElementById('pixel-toggle');
    const body = document.body;
    
    // Check localStorage
    const savedMode = localStorage.getItem('pixelMode');
    if (savedMode === 'true') {
      body.classList.add('pixel-mode');
      pixelToggle.classList.add('active');
    }
    
    pixelToggle.addEventListener('click', () => {
      body.classList.toggle('pixel-mode');
      pixelToggle.classList.toggle('active');
      
      // Save preference
      localStorage.setItem('pixelMode', body.classList.contains('pixel-mode'));
    });
  </script>

</body>
</html>
