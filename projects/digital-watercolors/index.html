<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Digital Watercolors â€” Haslun Studio</title>
  <meta name="description" content="Watercolor paintings brought to life. An interactive sketchbook by Haslun Studio.">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ¨</text></svg>">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-dark: #1a1a1a;
      --bg-card: #242424;
      --terracotta: #c4703f;
      --terracotta-light: #d4845a;
      --text-primary: #f5f5f5;
      --text-muted: #a0a0a0;
      --pixel-shadow: #0a0a0a;
    }

    html, body {
      height: 100%;
      overflow: hidden;
    }

    body {
      background: var(--bg-dark);
      color: var(--text-primary);
      font-family: 'DM Sans', sans-serif;
    }

    /* Animated Background */
    .background-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .background-animation canvas {
      image-rendering: pixelated;
      image-rendering: crisp-edges;
      height: 100%;
      width: auto;
      max-width: none;
    }

    /* Gradient overlay - softer for warm menu */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
      background: radial-gradient(ellipse at center, rgba(20,15,10,0.2) 0%, rgba(20,15,10,0.75) 70%);
      pointer-events: none;
    }

    /* Main content */
    .content {
      position: relative;
      z-index: 2;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    /* Logo */
    .logo {
      text-align: center;
      margin-bottom: 2rem;
    }

    .logo h1 {
      font-family: 'Cormorant Garamond', serif;
      font-weight: 400;
      font-size: 2.5rem;
      letter-spacing: 0.06em;
      color: #f4e4c1;
      text-shadow: 
        2px 2px 0 #2a1a08,
        -1px -1px 0 rgba(0,0,0,0.3);
      margin-bottom: 0.4rem;
    }

    .logo .tagline {
      font-family: 'Cormorant Garamond', serif;
      font-style: italic;
      font-size: 1rem;
      color: #d4c4a1;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }

    /* Stardew-style Pixel Menu */
    .pixel-menu {
      background: linear-gradient(180deg, #f4e4c1 0%, #e8d4a8 100%);
      border: 4px solid #8b5a2b;
      border-radius: 2px;
      padding: 0;
      box-shadow: 
        0 0 0 2px #5c3d1e,
        4px 4px 0 0 rgba(0,0,0,0.3),
        inset 0 0 0 2px #faf0d7;
      position: relative;
      min-width: 220px;
    }

    /* Wood plank header */
    .menu-header {
      background: linear-gradient(180deg, #7a4a1e 0%, #5c3d1e 100%);
      padding: 0.6rem 1rem;
      margin: -4px -4px 0 -4px;
      border-radius: 0;
      border-bottom: 3px solid #3d2810;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.15);
    }

    .menu-header h2 {
      font-family: 'DM Sans', sans-serif;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #f4e4c1;
      text-shadow: 1px 1px 0 #2a1a08;
      margin: 0;
      text-align: center;
    }

    .menu-section {
      padding: 0.75rem 0.5rem;
      border-bottom: 2px dashed #c4a467;
    }

    .menu-section:last-child {
      border-bottom: none;
    }

    .menu-section-label {
      font-family: 'DM Sans', sans-serif;
      font-size: 0.6rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: #7a5c3a;
      margin-bottom: 0.4rem;
      padding-left: 0.75rem;
      font-weight: 600;
    }

    .menu-items {
      display: flex;
      gap: 0.2rem;
      flex-direction: column;
    }

    .menu-item {
      font-family: 'DM Sans', sans-serif;
      font-size: 0.9rem;
      font-weight: 500;
      color: #3d2810;
      text-decoration: none;
      padding: 0.5rem 0.75rem;
      background: transparent;
      border: 2px solid transparent;
      border-radius: 2px;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.1s ease;
      cursor: pointer;
    }

    .menu-item::before {
      content: 'â—†';
      font-size: 0.5rem;
      color: #8b5a2b;
      opacity: 0.4;
      transition: all 0.1s ease;
    }

    .menu-item:hover {
      background: #e8d4a8;
      border-color: #8b5a2b;
      color: #2a1a08;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.4);
    }

    .menu-item:hover::before {
      opacity: 1;
      color: #c4703f;
    }

    .menu-item.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .menu-item.disabled:hover {
      background: transparent;
      border-color: transparent;
      box-shadow: none;
    }

    .menu-item.disabled::before {
      opacity: 0.3;
    }

    .coming-soon {
      font-size: 0.65rem;
      color: #8b7355;
      font-style: italic;
      margin-left: auto;
    }

    /* Scene items get a special style */
    .menu-item.scene-link {
      background: rgba(139, 90, 43, 0.1);
    }

    .menu-item.scene-link:hover {
      background: rgba(139, 90, 43, 0.25);
    }

    /* Footer */
    .footer {
      position: fixed;
      bottom: 1.5rem;
      left: 50%;
      transform: translateX(-50%);
      z-index: 2;
      text-align: center;
    }

    .footer p {
      font-family: 'Cormorant Garamond', serif;
      font-style: italic;
      font-size: 0.85rem;
      color: #d4c4a1;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }

    .footer a {
      color: #f4e4c1;
      text-decoration: none;
    }

    .footer a:hover {
      text-decoration: underline;
    }

    /* Responsive */
    @media (max-width: 600px) {
      .logo h1 {
        font-size: 1.75rem;
      }
      
      .pixel-menu {
        min-width: 200px;
      }
      
      .menu-header h2 {
        font-size: 0.7rem;
      }
      
      .menu-item {
        font-size: 0.85rem;
        padding: 0.45rem 0.6rem;
      }
    }
  </style>
</head>
<body>

  <div class="background-animation">
    <canvas id="bg-canvas"></canvas>
  </div>

  <div class="overlay"></div>

  <div class="content">
    <div class="logo">
      <h1>Digital Watercolors</h1>
      <p class="tagline">Paintings that breathe</p>
    </div>

    <nav class="pixel-menu">
      <div class="menu-header">
        <h2>âœ¦ Menu âœ¦</h2>
      </div>
      
      <!-- Scenes section - populated by JavaScript -->
      <div class="menu-section" id="scenes-section" style="display: none;">
        <div class="menu-section-label">Scenes</div>
        <div class="menu-items" id="scenes-menu"></div>
      </div>

      <!-- Static links -->
      <div class="menu-section">
        <div class="menu-section-label">Studio</div>
        <div class="menu-items">
          <a href="https://haslun.studio" class="menu-item" target="_blank">Gallery</a>
          <a href="https://haslun.studio/#prints" class="menu-item" target="_blank">Shop Prints</a>
          <a href="https://haslun.studio/watercolor-lab.html" class="menu-item" target="_blank">Color Lab</a>
        </div>
      </div>
    </nav>
  </div>

  <div class="footer">
    <p>Watercolors by <a href="https://haslun.studio" target="_blank">Haslun Studio</a></p>
  </div>

  <!-- Load scenes config -->
  <script src="scenes.js"></script>
  
  <script>
    // ========================================
    // HUB ANIMATION
    // ========================================
    const hubConfig = {
      frameCount: 20,
      framePath: 'hub-frames/frame-',
      frameExtension: '.png',
      frameDelay: 120,
      pingPong: true
    };

    const canvas = document.getElementById('bg-canvas');
    const ctx = canvas.getContext('2d');

    const state = {
      frames: [],
      currentFrame: 0,
      direction: 1,
      lastFrameTime: 0,
      loaded: 0
    };

    function preloadFrames() {
      return new Promise((resolve) => {
        for (let i = 0; i < hubConfig.frameCount; i++) {
          const img = new Image();
          const frameNum = String(i).padStart(3, '0');
          img.src = `${hubConfig.framePath}${frameNum}${hubConfig.frameExtension}`;
          
          img.onload = () => {
            state.loaded++;
            if (state.loaded === hubConfig.frameCount) {
              canvas.width = state.frames[0].width;
              canvas.height = state.frames[0].height;
              ctx.imageSmoothingEnabled = false;
              resolve();
            }
          };
          
          state.frames[i] = img;
        }
      });
    }

    function drawFrame() {
      const img = state.frames[state.currentFrame];
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(img, 0, 0);
    }

    function animate(timestamp) {
      if (timestamp - state.lastFrameTime >= hubConfig.frameDelay) {
        state.lastFrameTime = timestamp;
        
        state.currentFrame += state.direction;
        
        if (state.currentFrame >= hubConfig.frameCount - 1) {
          state.currentFrame = hubConfig.frameCount - 1;
          state.direction = -1;
        } else if (state.currentFrame <= 0) {
          state.currentFrame = 0;
          state.direction = 1;
        }
        
        drawFrame();
      }
      
      requestAnimationFrame(animate);
    }

    // ========================================
    // BUILD SCENES MENU FROM CONFIG
    // ========================================
    function buildScenesMenu() {
      if (typeof SCENES === 'undefined' || SCENES.length === 0) return;
      
      const section = document.getElementById('scenes-section');
      const menu = document.getElementById('scenes-menu');
      
      SCENES.forEach(scene => {
        const item = document.createElement('a');
        item.className = 'menu-item scene-link' + (scene.ready ? '' : ' disabled');
        item.href = scene.ready ? `scenes/${scene.id}/` : '#';
        item.innerHTML = scene.label;
        
        if (!scene.ready) {
          item.innerHTML += '<span class="coming-soon">soon</span>';
          item.onclick = (e) => e.preventDefault();
        }
        
        menu.appendChild(item);
      });
      
      section.style.display = 'block';
    }

    // ========================================
    // INIT
    // ========================================
    buildScenesMenu();
    
    preloadFrames().then(() => {
      drawFrame();
      requestAnimationFrame(animate);
    });
  </script>

</body>
</html>
